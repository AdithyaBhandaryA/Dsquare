swagger: '2.0'
info:
  version: '0.0.1'
  title: Dsquare API Management
# during dev, should point to your local machine
#host: localhost:3000
basePath: /dsquare/api
# basePath prefixes all resource paths
#
schemes:
  # tip: remove http to make production-grade
  - http
  - https
securityDefinitions:
  Bearer:
    type: apiKey
    name: Authorization
    in: header
    description: |
     For accessing the API a valid JWT token must be passed in all the queries in
     the 'Authorization' header.


     A valid JWT token is generated by the API and retourned as answer of a call
     to the route /login giving a valid user & password.


     The following syntax must be used in the 'Authorization' header :

         Bearer xxxxxx.yyyyyyy.zzzzzz
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
paths:
  /login:
    post:
      tags:
        - '1. Login'
      summary: 'To Login the user using his credencials'
      description: 'This api is for students and stuff members.'
      operationId: 'login'
      x-security-scopes:
        - student
        - staff
      produces:
        - 'application/xml'
        - 'application/json'
      parameters:
        - in: 'body'
          name: 'body'
          description: 'login.'
          required: false
          schema:
            $ref: '#/definitions/Login'
      responses:
        default:
          description: 'successful operation'
      x-swagger-router-controller: 'controller'

  /generate-otp:
    post:
      tags:
        - '1. Generate OTP'
      summary: 'To Generate OTP'
      description: 'This api is for all kind of users like admin, buyer or seller or both.'
      operationId: 'generateOTP'
      x-security-scopes:
        - both
        - admin
      produces:
        - 'application/xml'
        - 'application/json'
      parameters:
        - in: header
          name: 'accessToken'
          required: true
          type: 'string'
        - in: 'body'
          name: 'body'
          description: 'To generate User OTP.'
          required: false
          schema:
            $ref: '#/definitions/GenerateOTP'
      responses:
        default:
          description: 'successful operation'
      x-swagger-router-controller: 'controller'

  /verify-otp:
    post:
      tags:
        - '2. Verify OTP'
      summary: 'To Verify OTP'
      description: 'This api is for all kind of users admin, buyer or seller or both.'
      operationId: 'verifyOTP'
      x-security-scopes:
        - both
        - admin
      produces:
        - 'application/xml'
        - 'application/json'
      parameters:
        - in: header
          name: 'accessToken'
          required: true
          type: 'string'
        - in: 'body'
          name: 'body'
          description: 'To Verify User OTP.'
          required: false
          schema:
            $ref: '#/definitions/VerifyOTP'
      responses:
        default:
          description: 'successful operation'
      x-swagger-router-controller: 'controller'

definitions:
  Login:
    type: 'object'
    properties:
      email:
        type: string
      password:
        type: string
      role:
        type: string
        
  GenerateOTP:
    type: 'object'
    properties:
      phoneNumber:
        type: string
      deviceId:
        type: string

    xml:
      name: 'GenerateOTP'
    example:
      phoneNumber: "1725247797"
      deviceId: "314145165185"

  VerifyOTP:
    type: 'object'
    properties:
      phoneNumber:
        type: string
      otp:
        type: number
      deviceId:
        type: string

    xml:
      name: 'VerifyOTP'
    example:
      phoneNumber: "1725247797"
      otp: 123456
      deviceId: "314145165185"
